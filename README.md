# HiJayServerAPI

Инициализация Firebase - Начальная настройка Firebase для работы с Auth и Database.
CORS Middleware - Обеспечивает обработку запросов с различных источников (для разработки и тестирования важно).
Классы Pydantic - Определение структуры данных для запросов и ответов.
Аутентификация и регистрация - Реализация функций для работы с пользовательскими данными.
Чат - Отправка и получение сообщений, хранение в Firebase Realtime Database.


## API Эндпоинты

### Аутентификация и Регистрация

- `POST /register/`
  - **Описание**: Регистрирует нового пользователя в системе.
  - **Тело запроса**:
    ```json
    {
      "email": "user@example.com",
      "password": "password123"
    }
    ```
  - **Ответ**:
    ```json
    {
      "uid": "FirebaseUID",
      "email": "user@example.com"
    }
    ```
  - **Ошибки**: Возвращает ошибку 400, если регистрация в Firebase не удалась.

- `POST /token`
  - **Описание**: Авторизует пользователя и возвращает токен.
  - **Тело запроса**:
    ```json
    {
      "username": "user@example.com",
      "password": "password123"
    }
    ```
  - **Ответ**:
    ```json
    {
      "access_token": "FirebaseUID",
      "token_type": "bearer"
    }
    ```
  - **Ошибки**: Возвращает ошибку 401, если аутентификация не удалась.

### Пользовательские данные

- `GET /users/`
  - **Описание**: Возвращает список всех пользователей.
  - **Ответ**:
    ```json
    [
      {
        "uid": "FirebaseUID",
        "email": "user@example.com"
      }
    ]
    ```
  - **Ошибки**: Возвращает ошибку 500 при ошибках Firebase.

- `GET /user-profile`
  - **Описание**: Возвращает профиль текущего пользователя на основе предоставленного токена.
  - **Заголовки**:
    ```plaintext
    Authorization: Bearer FirebaseToken
    ```
  - **Ответ**:
    ```json
    {
      "id": "FirebaseUID",
      "email": "user@example.com"
    }
    ```
  - **Ошибки**: Возвращает ошибку 404, если пользователь не найден.

### Чат

- `POST /send-message/{chat_id}/`
  - **Описание**: Отправляет сообщение между пользователями.
  - **Параметры пути**:
    - `chat_id`: Идентификатор чата.
  - **Тело запроса**:
    ```json
    {
      "from_user_id": "FirebaseUID1",
      "to_user_id": "FirebaseUID2",
      "text": "Hello, world!"
    }
    ```
  - **Ответ**:
    ```json
    {
      "success": true,
      "message_id": "FirebaseMessageID"
    }
    ```
  - **Ошибки**: Возвращает ошибку 500 при неудачной отправке сообщения.

- `GET /messages/{chat_id}/`
  - **Описание**: Получает все сообщения из чата.
  - **Параметры пути**:
    - `chat_id`: Идентификатор чата.
  - **Ответ**:
    ```json
    [
      {
        "senderId": "FirebaseUID1",
        "text": "Hello, world!"
      }
    ]
    ```

## Подключение к базе данных Firebase

Для работы с Firebase и подключения к его сервисам аутентификации и баз данных необходимо:

1. Перейти на [Firebase Console](https://console.firebase.google.com/).
2. Создать новый проект или использовать существующий.
3. Включить нужные сервисы (Authentication, Firestore Database, Realtime Database) в настройках проекта.
4. Скачать файл конфигурации `firebase_config.py` и добавить его в корень проекта.

## Запуск проекта

Чтобы запустить проект локально, необходимо:

```sh
uvicorn main:app --reload
